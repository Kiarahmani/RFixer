
Given the regular expression:

  ((http|ftp)|https):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?

That that should match the strings:

  ✓ (0:26)   http://www.someserver.com/
  ✓ (26:64)  http://www.someserver.com/somefile.txt
  ✓ (64:81)  http://foo.co.uk/
  ✓ (81:113) http://regexr.com/foo.html?q=bar
  ✓ (113:136) https://mediatemple.net
  ✓ (136:153) http://foo.co.uk/
  ✓ (153:185) http://regexr.com/foo.html?q=bar
  ✓ (185:208) https://mediatemple.net
  ✓ (208:234) http://www.aspemporium.com
  ✓ (234:252) ftp://ftp.test.com
  ✓ (252:299) http://regexlib.com/REDetails.aspx?regexp_id=37

And reject the strings:

  ✗ (299:316) http://someserver
  ✗ (316:336) www.yahoo.com/period
  ✗ (336:348) foo@demo.net
  ✗ (348:365) bar.ba@test.co.uk
  ✗ (365:377) www.demo.com
  ✗ (377:388) -domain.com
  ✗ (388:399) domain-.com
  ✗ (399:414) http://yourmoma
  ✗ (414:442) mailto:dominionx@hotmail.com
  ✗ (442:455) www.abc.co.il
  ✗ (455:471) http://www.yahoo
  ✗ (471:490) http://www.textlink

Search through possible transformations:

  Order  |  Cost  Template                  Solution                        
---------|--------------------------------------------------------------------
  1      |  1     ((http|ftp)|ht■ps):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  2      |  1     ((http|ftp)|https):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?]){■}  unsatisfiable SAT formula       
  3      |  1     ((((ht)t)p|(ft)p)|h■tps):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  4      |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_]){■})+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  5      |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/■([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  6      |  1     ((((ht)t)p|ft■)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  7      |  1     ((■ttp|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  8      |  1     ((((ht)t)p|(ft)p)|■ttps):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  9      |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(■([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  10     |  1     ((((ht)t)p|(ft)p)|http■):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  11     |  1     ((htt■|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  12     |  1     ((h■tp|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  13     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):■\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  14     |  1     ((ht■p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  15     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+((■)*[a#\@%&m/\+p\-\w;=^~?])?  16     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@]){■}[a#\@%&m/\+p\-\w;=^~?])?  17     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+){■}(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  18     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*■)?  19     |  1     ((((ht)t)p|(ft)p)|htt■s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  20     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_])+(\.(■)+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  21     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/(■)+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  22     |  1     ((((ht)t)p|■tp)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  23     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s):\/\/([\-\w_]){■}(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  24     |  1     ((((ht)t)p|(ft)p)|(((ht)t)p)s)■\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  25     |  1     ((((ht)t)p|f■p)|(((ht)t)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  26     |  2     ((((ht)t)p|(ft)p)|ht■ps)■\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  27     |  2     ((h■tp|(ft)p)|(((ht)■)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  28     |  2     ((((ht)t)p|■tp)|(((ht)■)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  29     |  2     ((((ht)t)p|(ft)p)|ht■p■):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  30     |  2     ((htt■|(ft)p)|(((ht)■)p)s):\/\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?  unsatisfiable SAT formula       
  31     |  2     ((((ht)t)p|(ft)p)|(((ht)■)p)s):■\/([\-\w_])+(\.([\-\w_])+)+(([a#%&,m/\+p\-\.:\w;=^~?@])*[a#\@%&m/\+p\-\w;=^~?])?